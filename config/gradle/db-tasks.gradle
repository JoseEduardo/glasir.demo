import com.iteego.glasir.build.api.tasks.*

task createManagementChangesets(type: CreateChangesets) {
  description = "Creates glasir.db change sets and import definition and extracts required file assets."

  mainModuleName = "node.admin.development"

  selectedInstanceTypes = ["management"]

  importFileName = "versioned-imports.txt"

  selectedAddons = [
    "dcs-csr",
    "international",
    "merch",
    "previewOnManagement",
    "prodLock",
    "queryConsoleOnManagement",
    "storefront-full-setup",
    "switchingdatasource",

    "dcsui_siteadmin_versioned",
    "storefront_demo"
  ]
}

task createProductionChangesets(type: CreateChangesets) {
  description = "Like createManagementChangesets but with instance type \"production\" and another main module."

  mainModuleName = "node.store.development"

  selectedInstanceTypes = ["production"]

  importFileName = "non-versioned-imports.txt"

  selectedAddons = [
    "dcs-csr",
    "international",
    "merch",
    "previewOnManagement",
    "prodLock",
    "queryConsoleOnManagement",
    "storefront-full-setup",
    "switchingdatasource"
  ]
}

task listAddons(type:ListAvailableAddons) {}

task listProducts(type:ListAvailableProducts) {
  description = "List Installed ATG Products"
}

task listProductionDatasources(type:ListDatasources) {
  mainModuleName = "node.store.development"

  selectedAddons = [
    "dcs-csr",
    "international",
    "merch",
    "previewOnManagement",
    "prodLock",
    "queryConsoleOnManagement",
    "storefront-full-setup",
    "switchingdatasource"
  ]
}

task listManagementDatasources(type:ListDatasources) {
  mainModuleName = "node.admin.development"

  selectedAddons = [
    "dcs-csr",
    "international",
    "merch",
    "previewOnManagement",
    "prodLock",
    "queryConsoleOnManagement",
    "storefront-full-setup",
    "switchingdatasource"
  ]
}
